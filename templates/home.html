{% extends "layout.html" %}
{% block content %}
{% if showing %}

<div id="foodconfirm">
    <img class="confirmimage" src="static/images/{{food[0][2]}}" alt="">

    <span class="contents">
        <div class="foodtitle">{{food[0][0]}}</div>
        <div class="fooddescription">{{food[0][3]}}</div>
        <div class="foodprice">${{food[0][1]}}.00</div>

        <input type="number" class="input" value="1" min="1" />

        <button class="addtocart">Add to Cart</button>

        <form class="backbtn" method='GET'>
            <button type="back" class="back">Back</button>
        </form>
    </span>
</div>

{% endif %}
<div class="page_wrpr">
    <div style="display: none;">
        <form id="redirectForm" action="/" method="POST">
            <input type="hidden" name="food_id" id="foodIdInput" value="">
        </form>
    </div>


    <h1>Edwin's Chicken</h1>
    The Best Fried Chicken in Christchurch! - Cooked to Order - Homemade Sauce - Hand Battered - House marinated with
    the highest quality ingredients - New Zealand Fresh Chicken sourced from a mixture of suppliers delivered daily.
    <hr>
    {% for i in categories %}
    <h2>{{i[1]}}</h2>
    <p>{{i[2]}}</p>

    <div input="submit" class="grid-container">
        {% for f in foods %}
        {% if f[1] == i[0] %}

        <div class="grid-item" data-food-id="{{ f[0] }}">
            {% if f[4] %}
            <img class="foodimage" src="static/images/{{f[4]}}" alt="">
            {% endif %}
            <span class="contents">
                <div class="foodtitle"> {{f[2]}} </div>
                <div class="fooddescription"> {{f[5]}} </div>
                <div class="foodprice"> ${{f[3]}}.00 </div>



            </span>

        </div>



        {% endif %}
        {% endfor %}

    </div>
    {% endfor %}

</div>

<script>
    const gridItems = document.querySelectorAll('.grid-item');

    function handleClick(event) {
        const foodId = event.currentTarget.dataset.foodId;

        const foodIdInput = document.getElementById('foodIdInput');
        foodIdInput.value = foodId;

        const redirectForm = document.getElementById('redirectForm');
        redirectForm.submit();
    }

    gridItems.forEach(item => {
        item.addEventListener('click', handleClick);
    });
</script>

{% endblock %}